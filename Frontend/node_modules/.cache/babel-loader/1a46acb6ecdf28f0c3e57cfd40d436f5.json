{"ast":null,"code":"var _jsxFileName = \"/Users/aryan/Documents/Jio/image_generation/Frontend/src/DragAndDrop.js\";\nimport React, { useRef, useEffect, useState } from \"react\";\nimport \"./DragAndDrop.css\";\nimport { fabric } from \"fabric\";\nconst DragAndDropWithText = ({\n  setCanvas,\n  zoom\n}) => {\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n  const [showAskAI, setShowAskAI] = useState(false);\n  const [selectedText, setSelectedText] = useState(null);\n  const [aiInputVisible, setAIInputVisible] = useState(false);\n  const [aiInput, setAIInput] = useState(\"\");\n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    const fabricCanvas = new fabric.Canvas(canvasElement, {\n      backgroundColor: \"white\",\n      width: 700,\n      height: 500\n    });\n    fabricCanvasRef.current = fabricCanvas;\n    setCanvas(fabricCanvas);\n    fabricCanvas.on('mouse:up', e => {\n      const activeObject = fabricCanvas.getActiveObject();\n      if (activeObject && activeObject.type === 'i-text') {\n        setShowAskAI(true);\n        setSelectedText(activeObject);\n      } else {\n        setShowAskAI(false);\n        setSelectedText(null);\n        setAIInputVisible(false);\n      }\n    });\n    return () => {\n      fabricCanvas.dispose();\n    };\n  }, [setCanvas]);\n  useEffect(() => {\n    if (fabricCanvasRef.current) {\n      const canvas = fabricCanvasRef.current;\n      const zoomFactor = zoom / 100;\n      canvas.setZoom(zoomFactor);\n      canvas.setWidth(700 * zoomFactor);\n      canvas.setHeight(500 * zoomFactor);\n\n      // Adjust all objects on the canvas\n      canvas.getObjects().forEach(obj => {\n        obj.scaleX *= zoomFactor;\n        obj.scaleY *= zoomFactor;\n        obj.left *= zoomFactor;\n        obj.top *= zoomFactor;\n        obj.setCoords();\n      });\n      const backgroundImage = canvas.backgroundImage;\n      if (backgroundImage) {\n        const scaleX = canvas.width / canvas.originalBackgroundImageWidth * zoomFactor;\n        const scaleY = canvas.height / canvas.originalBackgroundImageHeight * zoomFactor;\n        backgroundImage.set({\n          scaleX: scaleX,\n          scaleY: scaleY\n        });\n        canvas.renderAll();\n      }\n    }\n  }, [zoom]);\n  const handleAskAIClick = () => {\n    setAIInputVisible(true);\n  };\n  const handleInputChange = e => {\n    setAIInput(e.target.value);\n  };\n  const handleSubmit = () => {\n    // Send aiInput and selectedText to backend for processing\n    console.log(\"Send to backend:\", aiInput, selectedText);\n    // Reset input\n    setAIInput(\"\");\n    setAIInputVisible(false);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }), showAskAI && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ask-ai-button\",\n    onClick: handleAskAIClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"Ask AI\"), aiInputVisible && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ai-input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: aiInput,\n    onChange: handleInputChange,\n    placeholder: \"Enter your command\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, \"Submit\")));\n};\nexport default DragAndDropWithText;","map":{"version":3,"names":["React","useRef","useEffect","useState","fabric","DragAndDropWithText","setCanvas","zoom","canvasRef","fabricCanvasRef","showAskAI","setShowAskAI","selectedText","setSelectedText","aiInputVisible","setAIInputVisible","aiInput","setAIInput","canvasElement","current","fabricCanvas","Canvas","backgroundColor","width","height","on","e","activeObject","getActiveObject","type","dispose","canvas","zoomFactor","setZoom","setWidth","setHeight","getObjects","forEach","obj","scaleX","scaleY","left","top","setCoords","backgroundImage","originalBackgroundImageWidth","originalBackgroundImageHeight","set","renderAll","handleAskAIClick","handleInputChange","target","value","handleSubmit","console","log","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref","onClick","onChange","placeholder"],"sources":["/Users/aryan/Documents/Jio/image_generation/Frontend/src/DragAndDrop.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"./DragAndDrop.css\";\nimport { fabric } from \"fabric\";\n\nconst DragAndDropWithText = ({ setCanvas, zoom }) => {\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n  const [showAskAI, setShowAskAI] = useState(false);\n  const [selectedText, setSelectedText] = useState(null);\n  const [aiInputVisible, setAIInputVisible] = useState(false);\n  const [aiInput, setAIInput] = useState(\"\");\n\n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    const fabricCanvas = new fabric.Canvas(canvasElement, {\n      backgroundColor: \"white\",\n      width: 700,\n      height: 500,\n    });\n    fabricCanvasRef.current = fabricCanvas;\n    setCanvas(fabricCanvas);\n\n    fabricCanvas.on('mouse:up', (e) => {\n      const activeObject = fabricCanvas.getActiveObject();\n      if (activeObject && activeObject.type === 'i-text') {\n        setShowAskAI(true);\n        setSelectedText(activeObject);\n      } else {\n        setShowAskAI(false);\n        setSelectedText(null);\n        setAIInputVisible(false);\n      }\n    });\n\n    return () => {\n      fabricCanvas.dispose();\n    };\n  }, [setCanvas]);\n\n  useEffect(() => {\n    if (fabricCanvasRef.current) {\n      const canvas = fabricCanvasRef.current;\n      const zoomFactor = zoom / 100;\n\n      canvas.setZoom(zoomFactor);\n      canvas.setWidth(700 * zoomFactor);\n      canvas.setHeight(500 * zoomFactor);\n\n      // Adjust all objects on the canvas\n      canvas.getObjects().forEach((obj) => {\n        obj.scaleX *= zoomFactor;\n        obj.scaleY *= zoomFactor;\n        obj.left *= zoomFactor;\n        obj.top *= zoomFactor;\n        obj.setCoords();\n      });\n\n      const backgroundImage = canvas.backgroundImage;\n      if (backgroundImage) {\n        const scaleX = (canvas.width / canvas.originalBackgroundImageWidth) * zoomFactor;\n        const scaleY = (canvas.height / canvas.originalBackgroundImageHeight) * zoomFactor;\n\n        backgroundImage.set({\n          scaleX: scaleX,\n          scaleY: scaleY,\n        });\n\n        canvas.renderAll();\n      }\n    }\n  }, [zoom]);\n\n  const handleAskAIClick = () => {\n    setAIInputVisible(true);\n  };\n\n  const handleInputChange = (e) => {\n    setAIInput(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    // Send aiInput and selectedText to backend for processing\n    console.log(\"Send to backend:\", aiInput, selectedText);\n    // Reset input\n    setAIInput(\"\");\n    setAIInputVisible(false);\n  };\n\n  return (\n    <div className=\"container\">\n      <canvas ref={canvasRef} />\n      {showAskAI && (\n        <div className=\"ask-ai-button\" onClick={handleAskAIClick}>\n          Ask AI\n        </div>\n      )}\n      {aiInputVisible && (\n        <div className=\"ai-input-container\">\n          <input \n            type=\"text\" \n            value={aiInput} \n            onChange={handleInputChange} \n            placeholder=\"Enter your command\" \n          />\n          <button onClick={handleSubmit}>Submit</button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DragAndDropWithText;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}