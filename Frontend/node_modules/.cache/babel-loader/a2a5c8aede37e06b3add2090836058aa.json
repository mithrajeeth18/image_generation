{"ast":null,"code":"var _jsxFileName = \"/Users/aryan/Documents/Jio/image_generation/Frontend/src/DragAndDrop.js\";\nimport React, { useRef, useEffect } from \"react\";\nimport \"./DragAndDrop.css\";\nimport { fabric } from \"fabric\";\nconst DragAndDropWithText = ({\n  setCanvas,\n  zoom\n}) => {\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    const fabricCanvas = new fabric.Canvas(canvasElement, {\n      backgroundColor: \"white\",\n      width: 700,\n      height: 500\n    });\n    fabricCanvasRef.current = fabricCanvas;\n    setCanvas(fabricCanvas);\n    const handleKeyDown = e => {\n      if ((e.key === \"Delete\" || e.key === \"Backspace\") && (e.metaKey || e.ctrlKey)) {\n        const activeObject = fabricCanvas.getActiveObject();\n        if (activeObject) {\n          fabricCanvas.remove(activeObject);\n          fabricCanvas.renderAll();\n        }\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      fabricCanvas.dispose();\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [setCanvas]);\n  useEffect(() => {\n    if (fabricCanvasRef.current) {\n      const canvas = fabricCanvasRef.current;\n      const zoomFactor = zoom / 100;\n      canvas.setZoom(zoomFactor);\n      canvas.setWidth(700 * zoomFactor);\n      canvas.setHeight(500 * zoomFactor);\n\n      // Adjust all objects on the canvas\n      canvas.getObjects().forEach(obj => {\n        obj.scaleX *= zoomFactor;\n        obj.scaleY *= zoomFactor;\n        obj.left *= zoomFactor;\n        obj.top *= zoomFactor;\n        obj.setCoords();\n      });\n      const backgroundImage = canvas.backgroundImage;\n      if (backgroundImage) {\n        const scaleX = canvas.width / canvas.originalBackgroundImageWidth * zoomFactor;\n        const scaleY = canvas.height / canvas.originalBackgroundImageHeight * zoomFactor;\n        backgroundImage.set({\n          scaleX: scaleX,\n          scaleY: scaleY\n        });\n        canvas.renderAll();\n      }\n    }\n  }, [zoom]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    ref: canvasRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n};\nexport default DragAndDropWithText;","map":{"version":3,"names":["React","useRef","useEffect","fabric","DragAndDropWithText","setCanvas","zoom","canvasRef","fabricCanvasRef","canvasElement","current","fabricCanvas","Canvas","backgroundColor","width","height","handleKeyDown","e","key","metaKey","ctrlKey","activeObject","getActiveObject","remove","renderAll","document","addEventListener","dispose","removeEventListener","canvas","zoomFactor","setZoom","setWidth","setHeight","getObjects","forEach","obj","scaleX","scaleY","left","top","setCoords","backgroundImage","originalBackgroundImageWidth","originalBackgroundImageHeight","set","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref"],"sources":["/Users/aryan/Documents/Jio/image_generation/Frontend/src/DragAndDrop.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\nimport \"./DragAndDrop.css\";\nimport { fabric } from \"fabric\";\n\nconst DragAndDropWithText = ({ setCanvas, zoom }) => {\n  const canvasRef = useRef(null);\n  const fabricCanvasRef = useRef(null);\n\n  useEffect(() => {\n    const canvasElement = canvasRef.current;\n    const fabricCanvas = new fabric.Canvas(canvasElement, {\n      backgroundColor: \"white\",\n      width: 700,\n      height: 500,\n    });\n    fabricCanvasRef.current = fabricCanvas;\n    setCanvas(fabricCanvas);\n\n    const handleKeyDown = (e) => {\n      if ((e.key === \"Delete\" || e.key === \"Backspace\") && (e.metaKey || e.ctrlKey)) {\n        const activeObject = fabricCanvas.getActiveObject();\n        if (activeObject) {\n          fabricCanvas.remove(activeObject);\n          fabricCanvas.renderAll();\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleKeyDown);\n\n    return () => {\n      fabricCanvas.dispose();\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, [setCanvas]);\n\n  useEffect(() => {\n    if (fabricCanvasRef.current) {\n      const canvas = fabricCanvasRef.current;\n      const zoomFactor = zoom / 100;\n\n      canvas.setZoom(zoomFactor);\n      canvas.setWidth(700 * zoomFactor);\n      canvas.setHeight(500 * zoomFactor);\n\n      // Adjust all objects on the canvas\n      canvas.getObjects().forEach((obj) => {\n        obj.scaleX *= zoomFactor;\n        obj.scaleY *= zoomFactor;\n        obj.left *= zoomFactor;\n        obj.top *= zoomFactor;\n        obj.setCoords();\n      });\n\n      const backgroundImage = canvas.backgroundImage;\n      if (backgroundImage) {\n        const scaleX = (canvas.width / canvas.originalBackgroundImageWidth) * zoomFactor;\n        const scaleY = (canvas.height / canvas.originalBackgroundImageHeight) * zoomFactor;\n\n        backgroundImage.set({\n          scaleX: scaleX,\n          scaleY: scaleY,\n        });\n\n        canvas.renderAll();\n      }\n    }\n  }, [zoom]);\n\n  return (\n    <div className=\"container\">\n      <canvas ref={canvasRef} />\n    </div>\n  );\n};\n\nexport default DragAndDropWithText;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}